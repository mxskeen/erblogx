name: Keep Backend Alive


on:
  schedule:
    # Runs every 3 hours (at minute 0 of hours 0, 3, 6, 9, 12, 15, 18, 21)
    - cron: '0 */3 * * *'
  
  # Allow manual triggering for testing
  workflow_dispatch:

jobs:
  ping-backend:
    runs-on: ubuntu-latest
    
    steps:
      - name: Ping Hugging Face Space Backend
        run: |
          echo " Pinging ErBlogX backend to keep it alive..."
          
          echo " Testing AI search endpoint (1/4)..."
          echo "Query: how to use ai apps"
          curl -f -s "https://maskeen-erblogx.hf.space/ai-search?q=how%20to%20use%20ai%20apps" && echo "‚úÖ AI search 1 successful" || echo "‚ùå AI search 1 failed"
          echo ""
          
          echo " Testing AI search endpoint (2/4)..."
          echo "Query: programming tutorials"
          curl -f -s "https://maskeen-erblogx.hf.space/ai-search?q=programming%20tutorials" && echo "‚úÖ AI search 2 successful" || echo "‚ùå AI search 2 failed"
          echo ""
          
          echo " Testing AI search endpoint (3/4)..."
          echo "Query: web development"
          curl -f -s "https://maskeen-erblogx.hf.space/ai-search?q=web%20development" && echo "‚úÖ AI search 3 successful" || echo "‚ùå AI search 3 failed"
          echo ""
          
          echo " Testing AI search endpoint (4/4)..."
          echo "Query: machine learning"
          curl -f -s "https://maskeen-erblogx.hf.space/ai-search?q=machine%20learning" && echo "‚úÖ AI search 4 successful" || echo "‚ùå AI search 4 failed"
          echo ""
          
          # Ping the root endpoint
          echo " Testing root endpoint..."
          curl -f -s "https://maskeen-erblogx.hf.space/" && echo "‚úÖ Root endpoint successful" || echo "‚ùå Root endpoint failed"
          echo ""
          
          echo "‚úÖ Backend ping completed at $(date)"
      
      - name: Log Status
        run: |
          echo "üéØ Keep-alive job completed successfully"
